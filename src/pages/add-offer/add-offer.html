<!--
  Generated template for the AddOfferPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>Create an offer</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="onAddOffer()" [disabled]="!form.valid || !datesValid()">
        <ion-icon name="checkmark"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <form [formGroup]="form" >
    <ion-grid>
      <ion-row>
        <ion-col col-12 col-sm-6 offset-sm-3>
          <ion-item>
            <ion-label floating>Title</ion-label>
            <ion-input type="text" autocomplete autocorrect formControlName="title"></ion-input>
          </ion-item>
          <div *ngIf="!form.get('title').valid && form.get('title').touched" class="error-msg">
            <ion-icon name="alert"></ion-icon>
            Must enter a title.
          </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-12 col-sm-6 offset-sm-3>
          <ion-item>
            <ion-label floating>Description</ion-label>
            <ion-textarea rows="1" formControlName="description"></ion-textarea>
          </ion-item>
          <div *ngIf="!form.get('description').valid && form.get('description').touched" class="error-msg">
            <ion-icon name="alert"></ion-icon>
            Description must be between 4 and 180 characters.
          </div>
          
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-12 col-sm-6 offset-sm-3>
          <ion-item>
            <ion-label floating>Price</ion-label>
            <ion-input type="number" formControlName="price"></ion-input>
          </ion-item>
          <div *ngIf="!form.get('price').valid && form.get('price').touched" class="error-msg">
            <ion-icon name="alert"></ion-icon>
            Price must be more than 1.00$.
          </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6 col-sm-3 offset-sm-3>
          <ion-item>
            <ion-label floating>Available from</ion-label>
            <ion-datetime min="2020-08-08" max="2020-12-32" formControlName="dateFrom"></ion-datetime>
          </ion-item>
        </ion-col>
        <ion-col col-6 col-sm-3>
          <ion-item>
            <ion-label floating>Available to</ion-label>
            <ion-datetime min="2020-08-08" max="2020-12-31" formControlName="dateTo"></ion-datetime>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <location-picker (locationPick)="onLocationPicked($event)" [placeLocation]='placeLocation'></location-picker>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <image-picker (imagePick)="onImagePicked($event)" [isImageLoading]="isImageLoading" [imageUrl]="offerImageUrl"></image-picker>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>
